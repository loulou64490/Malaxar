function malaxar {
    local fast=""
    local valgrind=0
    local OPTIND

    while getopts "f v o h l" opt; do
        case $opt in
            f) fast="-Ofast -DNDEBUG" ;;
            o) fast="-O0";;
            v) valgrind=1;;
            h) echo "Options valides :"
               echo "   -f : Ajoute les options -Ofast et -DNDEBUG lors de la compilation pour un executable plus rapide"
               echo "   -v : execute le code dans Valgrind"
               echo "   -o : ajoute l'option -O0 lors de la compilation pour que gcc ne modifie pas le code"
               echo "   -h : affiche ce message"
               return 0 ;;
            \?) echo "option invalide. -h pour la liste des options."
                return 1 ;;
        esac
    done
    
    shift $((OPTIND - 1))

    local nom_prog=${1/.c/}
    case ${1: -1} in
        'c' ) gcc "$1" -Wall -Wextra $fast -lm -g -o $nom_prog
        if [ $valgrind -eq 0 ]; then
            ./"$nom_prog" "${@:2}"
        else
            valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./"$nom_prog" "${@:2}"
        fi
        rm $nom_prog ;;
        'y' ) /bin/python3 $1;;
    esac
}
